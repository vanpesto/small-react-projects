(this["webpackJsonpsocial-app"]=this["webpackJsonpsocial-app"]||[]).push([[0],{240:function(e,t,a){},245:function(e,t,a){},246:function(e,t,a){},247:function(e,t,a){},248:function(e,t,a){},249:function(e,t,a){},250:function(e,t,a){"use strict";a.r(t);var c=a(3),s=a(4),n=a.n(s),r=a(95),o=a.n(r),i=a(8),u=a(13),l=a(101),j=a(7),d=a.n(j),b=a(24),m=a(14),p=a(6),f=a(17),O=(a(209),f.a.initializeApp({apiKey:"AIzaSyASt-GU3tXsIWyifq2i2Wlvfa0wn55Us-s",authDomain:"social-app-a3253.firebaseapp.com",databaseURL:"https://social-app-a3253-default-rtdb.firebaseio.com",projectId:"social-app-a3253",storageBucket:"social-app-a3253.appspot.com",messagingSenderId:"774022938333",appId:"1:774022938333:web:9c32b23044db36e059a534",measurementId:"G-R2P4D23YRW"})),h=O.auth(),x=a(11),v=n.a.createContext();function g(){return Object(s.useContext)(v)}function N(e){var t=e.children,n=Object(s.useState)(),r=Object(p.a)(n,2),o=r[0],i=r[1],u=Object(s.useState)(!0),l=Object(p.a)(u,2),j=l[0],f=l[1],O=Object(s.useState)(!0),g=Object(p.a)(O,2),N=g[0],k=g[1],y=Object(s.useState)([]),w=Object(p.a)(y,2),P=w[0],I=w[1],S=Object(s.useState)(""),U=Object(p.a)(S,2),E=U[0],C=U[1],B=Object(s.useState)(),L=Object(p.a)(B,2),R=L[0],D=L[1],T=Object(s.useState)([]),A=Object(p.a)(T,2),F=A[0],q=A[1],V=Object(s.useState)(0),W=Object(p.a)(V,2),Y=W[0],K=W[1],G=Object(s.useState)(0),M=Object(p.a)(G,2),z=M[0],H=M[1],J=Object(s.useState)(!1),_=Object(p.a)(J,2),X=_[0],Q=_[1],Z=Object(s.useState)(),$=Object(p.a)(Z,2),ee=$[0],te=($[1],a(210));function ae(e){return e<10?"0"+e:e}function ce(){var e=new Date;return{time:e.getHours()+":"+ae(e.getMinutes()),date:ae(e.getDate())+"-"+ae(e.getMonth()+1)+"-"+e.getFullYear()}}function se(e){o&&x.a.database().ref("users/".concat(e)).once("value").then((function(e){q(e.exportVal())}))}function ne(){return(ne=Object(m.a)(d.a.mark((function e(t,a,c){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",h.createUserWithEmailAndPassword(a,c).then((function(e){var c=x.a.auth().currentUser.uid;x.a.database().ref("users/"+c).set({username:t,email:a,userImage:"images/avatar.png",userBgImg:"images/bg.jpg"})})));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function re(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"",c=arguments.length>3?arguments[3]:void 0,s=x.a.auth().currentUser.uid;x.a.database().ref("/users/"+s).once("value").then((function(c){var n=c.val().username;x.a.database().ref("Posts/"+e).set({postId:e,comment:t,postImage:a,userId:s,user:n,userImage:F.userImage,comments:"",numComments:0,likes:0,likedBy:"",date:ce()})})).then((function(){"all"===c?je():de()})),C(""),x.a.database().ref("/users/"+o.uid+"/posts/"+e).set(t)}function oe(e,t,a,c){if(k(!0),t){var s=x.a.storage().ref("".concat(e,"/").concat(o.uid,"/").concat(t.name)).put(t);s.on(x.a.storage.TaskEvent.STATE_CHANGED,(function(e){var t=e.bytesTransferred/e.totalBytes*100;switch(console.log("Upload is "+t+"% done"),e.state){case x.a.storage.TaskState.PAUSED:console.log("Upload is paused");break;case x.a.storage.TaskState.RUNNING:console.log("Upload is running")}}),(function(e){e.code}),(function(){D(""),s.snapshot.ref.getDownloadURL().then((function(t){"postImage"===e?re(a,c,t):x.a.database().ref("users/".concat(o.uid,"/").concat(e)).set(t).then((function(){se(o.uid),x.a.database().ref("Posts").orderByChild("userId").equalTo(o.uid).once("value").then((function(a){a.exists()?a.forEach((function(a){x.a.database().ref("/Posts/".concat(a.key,"/").concat(e)).set(t),de(),k(!1)})):k(!1)}))}))}))}))}else k(!1)}function ie(e){return ue.apply(this,arguments)}function ue(){return(ue=Object(m.a)(d.a.mark((function e(t){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,te.callStandardApi("content-moderation",{image:document.getElementById(t)});case 2:if(!(e.sent.output.nsfw_score>.049)){e.next=7;break}return e.abrupt("return",!1);case 7:return e.abrupt("return",!0);case 8:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function le(){return(le=Object(m.a)(d.a.mark((function e(t,a,c){var s;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return k(!0),s=t.target.files[0],e.next=4,ie(c);case 4:if(e.sent){e.next=8;break}return k(!1),alert("\n            Your image contains nudity!\n            You can't upload that picture!\n            "),e.abrupt("return");case 8:if(D(s),"tempImage"!==a){e.next=15;break}return C(URL.createObjectURL(s)),k(!1),e.abrupt("return");case 15:oe(a,s);case 16:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function je(){var e=[],t=0;x.a.database().ref("Posts").orderByKey().limitToLast(3).once("value",(function(a){a.forEach((function(a){x.a.database().ref("/Posts/".concat(a.key)).once("value").then((function(c){++t<2&&K(a.key),e=[c.exportVal()].concat(Object(b.a)(e)),I(e)}))}))})),k(!1),H(!1)}function de(e){return be.apply(this,arguments)}function be(){return(be=Object(m.a)(d.a.mark((function e(t){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:new Promise((function(e,t){x.a.database().ref("Posts").orderByChild("userId").equalTo(x.a.auth().currentUser.uid).on("value",(function(t){var a=[];t.exists()?t.forEach((function(t){x.a.database().ref("/Posts/"+t.key).once("value").then((function(e){a.push(e.exportVal())})).then((function(){e(a)}))})):k(!1)}))})).then((function(e){I(e.reverse()),k(!1)}));case 2:case"end":return e.stop()}}),e)})))).apply(this,arguments)}te.setApiKey("d1cbe1ff-200e-447f-8c7f-8d366377582e"),Object(s.useEffect)((function(){return h.onAuthStateChanged((function(e){i(e),f(!1)}))}),[]);var me={currentUser:o,signup:function(e,t,a){return ne.apply(this,arguments)},login:function(e,t){return h.signInWithEmailAndPassword(e,t)},logout:function(){I([]),q([]),h.signOut()},getUserData:se,userData:F,foreignUser:ee,loading:N,loadingPosts:X,disabledPosts:z,resetPassword:function(e){return h.sendPasswordResetEmail(e)},updatePassword:function(e){return o.updatePassword(e)},updateEmail:function(e){return o.updateEmail(e)},updateUsername:function(e){k(!0),x.a.database().ref("users/".concat(o.uid,"/user")).set(e).then((function(){se(),x.a.database().ref("Posts").orderByChild("userId").equalTo(o.uid).once("value").then((function(t){t.exists()?t.forEach((function(t){x.a.database().ref("/Posts/".concat(t.key,"/user")).set(e),de(),k(!1)})):k(!1)}))}))},writeNewPost:function(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"";k(!0),R?(oe("postImage",R,e,t),D("")):re(e,t,"",a)},getUsername:function(){x.a.database().ref("users").orderByChild("email").equalTo(o.email).on("value",(function(e){e.forEach((function(e){return x.a.database().ref("users/"+e.key+"/username")}))}))},fetchUserPosts:de,fetchAllUserPosts:function(){Q(!0);var e=P,t=0;x.a.database().ref("Posts").orderByKey().endAt(Y).limitToLast(6).once("value",(function(a){a.exists()||H(!0),a.forEach((function(a){x.a.database().ref("/Posts/".concat(a.key)).once("value").then((function(c){a.key!==Y&&(++t<2&&K(a.key),e=[].concat(Object(b.a)(e),[c.exportVal()]))})).then((function(){I(e),Q(!1),H(t<5)}))}))}))},fetchFirstAllUserPosts:je,uploadImage:oe,prepareImageForUpload:function(e,t,a){return le.apply(this,arguments)},image:E,posts:P,setPosts:I};return Object(c.jsx)(v.Provider,{value:me,children:!j&&t})}a(240);var k=a(65);var y=function(){var e=Object(s.useState)(),t=Object(p.a)(e,2),a=t[0],n=t[1],r=Object(u.g)(),o=Object(s.useRef)(),l=Object(s.useRef)(),j=g(),b=j.logout,f=j.userData,O=j.prepareImageForUpload;function h(){return(h=Object(m.a)(d.a.mark((function e(){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n(""),e.prev=1,e.next=4,b();case 4:r.pushState("/login"),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(1),n("Failed to log out");case 10:case"end":return e.stop()}}),e,null,[[1,7]])})))).apply(this,arguments)}return Object(c.jsx)("div",{className:"account",children:Object(c.jsxs)("div",{className:"account-container",children:[Object(c.jsx)("input",{id:"fileButtonBg",type:"file",ref:o,onChange:function(e){return O(e,"userBgImg","fileButtonBg")},style:{display:"none"}}),Object(c.jsx)("input",{id:"fileButtonProfile",type:"file",ref:l,onChange:function(e){return O(e,"userImage","fileButtonProfile")},style:{display:"none"}}),a&&Object(c.jsx)("p",{children:a}),Object(c.jsxs)("div",{className:"user-bg-img",children:[f.userBgImg&&Object(c.jsx)("img",{src:f.userBgImg,alt:"background-img"}),Object(c.jsxs)("button",{className:"user-change-bg-btn ".concat(!f.userBgImg&&"no-bg"),onClick:function(){return o.current.click()},children:[Object(c.jsx)("p",{children:Object(c.jsx)(k.a,{})})," Background Image"]})]}),Object(c.jsxs)("div",{className:"user-image",onClick:function(){return l.current.click()},children:[Object(c.jsx)("span",{children:Object(c.jsx)(k.a,{})}),Object(c.jsx)("img",{src:f.userImage,alt:"user img"})]}),Object(c.jsx)("p",{className:"account-username",children:f.username}),Object(c.jsx)(i.b,{className:"profile-update-btn",to:"updateProfile",children:"Update Profile"}),Object(c.jsx)("button",{className:"logout-btn",onClick:function(){return h.apply(this,arguments)},children:"Log Out"})]})})};a(245);var w=function(){return Object(c.jsxs)("div",{className:"loading",children:[Object(c.jsxs)("div",{className:"lds-ring",children:[Object(c.jsx)("div",{}),Object(c.jsx)("div",{}),Object(c.jsx)("div",{}),Object(c.jsx)("div",{})]}),Object(c.jsx)("p",{children:"Loading..."})]})};var P=function(e){var t=e.type,a=e.title,n=e.allPostsLink,r=Object(s.useRef)(),o=Object(s.useRef)(),u=Object(s.useState)(""),l=Object(p.a)(u,2),j=l[0],b=l[1],f=g(),O=f.currentUser,h=f.writeNewPost,x=f.prepareImageForUpload,v=f.image,N=f.getUserData,k=Object(s.useState)(""),y=Object(p.a)(k,2),w=y[0],P=y[1],I=Object(s.useState)(t),S=Object(p.a)(I,2),U=S[0],E=(S[1],Object(s.useRef)());function C(){return(C=Object(m.a)(d.a.mark((function e(t){var a;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.preventDefault(),""!==w||v){e.next=7;break}return b(!0),E.current.select(),e.abrupt("return");case 7:b(!1);case 8:a=(new Date).getTime(),h(a,w,U),P(""),E.current.select();case 12:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return Object(s.useEffect)((function(){O&&N(O.uid)}),[]),Object(c.jsx)("div",{ref:r,className:"post",children:Object(c.jsx)("form",{className:"write-post-form",onSubmit:function(e){return C.apply(this,arguments)},children:O?Object(c.jsxs)(c.Fragment,{children:[Object(c.jsx)("h2",{className:"posts-title",children:a}),Object(c.jsx)(i.b,{to:"/",className:"link all-posts-link",children:n}),j&&Object(c.jsx)("p",{className:"error",children:"Please write a comment or add an image"}),Object(c.jsx)("textarea",{ref:E,value:w,className:"write-post-desc",placeholder:"What are your thoughts?",onChange:function(e){return P(e.target.value.trimStart())}}),Object(c.jsx)("input",{type:"file",ref:o,id:"filePostButton",multiple:"",name:"file",accept:"image/*",hidden:"hidden",onChange:function(e){return x(e,"tempImage","filePostButton")}}),Object(c.jsx)("button",{type:"button",className:"post-img-btn",onClick:function(){return o.current.click()},children:v?"Change Image":"Add Image"}),v&&Object(c.jsx)("div",{className:"post-image",children:Object(c.jsx)("img",{src:v,alt:"Post Img"})}),Object(c.jsx)("button",{className:"post-btn",children:"Post"})]}):Object(c.jsxs)("p",{className:"no-user-message",children:["If you want to post, comment or like",Object(c.jsx)(i.b,{to:"/login",className:"login-btn",children:" Log In "})," or",Object(c.jsx)(i.b,{to:"/signup",className:"sign-up-btn",children:" Sign Up "})," if you don't have an account."]})})})},I=a(30),S=a(98);var U=function(e){var t=e.comment;return Object(c.jsxs)("div",{className:"user-comment-container",children:[Object(c.jsx)("div",{className:"user-comment-image user-img-bg",children:Object(c.jsx)("img",{src:t.userImage,alt:"user"})}),Object(c.jsxs)("div",{className:"user-comment-details",children:[Object(c.jsx)("p",{className:"user-comment-username",children:t.username}),Object(c.jsx)("p",{className:"user-comment",children:t.comment})]})]})},E=a(97),C=a.n(E),B=a(99);a(246);var L=function(e){var t=g(),a=t.currentUser,n=t.getUserData,r=t.userData,o=Object(s.useState)(e.likes),u=Object(p.a)(o,2),l=u[0],j=u[1],d=Object(s.useState)(0),m=Object(p.a)(d,2),O=m[0],h=m[1],x=Object(s.useState)(""),v=Object(p.a)(x,2),N=v[0],k=v[1],y=Object(s.useState)([]),w=Object(p.a)(y,2),P=w[0],I=w[1],E=Object(s.useState)(!1),L=Object(p.a)(E,2),R=L[0],D=L[1],T=Object(s.useState)(!1),A=Object(p.a)(T,2),F=A[0],q=A[1],V=Object(s.useState)(),W=Object(p.a)(V,2),Y=W[0],K=W[1],G=Object(s.useState)(""),M=Object(p.a)(G,2),z=M[0],H=M[1],J=Object(s.useState)(!1),_=Object(p.a)(J,2),X=_[0],Q=_[1],Z=Object(s.useState)(!1),$=Object(p.a)(Z,2),ee=$[0],te=$[1],ae=Object(s.useRef)(),ce=Object(s.useRef)();function se(){Q(!0);var t=[],a=0;f.a.database().ref("Posts/".concat(e.postId,"/comments")).orderByKey().limitToLast(3).once("value",(function(c){c.forEach((function(c){f.a.database().ref("/Posts/".concat(e.postId,"/comments/").concat(c.key)).once("value").then((function(e){++a<2&&K(c.key),t=[e.exportVal()].concat(Object(b.a)(t)),I(t)}))})),Q(!1)}))}Object(s.useEffect)((function(){a&&n(a.uid),ne(),se(),a&&f.a.database().ref("Posts/".concat(e.postId,"/likedBy")).on("value",(function(e){e.forEach((function(e){a.uid===e.key&&D(!0)}))}))}),[]),Object(s.useEffect)((function(){P.length>=O?q(!0):q(!1)}),[P,O]);var ne=function(){f.a.database().ref("Posts/".concat(e.postId,"/numComments")).on("value",(function(e){h(e.exportVal()),se()}))},re=function(t){if("Enter"===t.key){if(""===N)return;te(!1),function(){if(a){var t=(new Date).getTime();f.a.database().ref("Posts/".concat(e.postId,"/comments/").concat(t)).set({comment:N,username:r.username,userImage:r.userImage}),f.a.database().ref("Posts/".concat(e.postId,"/numComments")).set(O+1).then((function(){ne()}))}else H("You need an account to Like or Write a comment!"),setTimeout((function(){H("")}),2e3)}(),k("")}};return Object(c.jsxs)("div",{className:"post",children:[Object(c.jsxs)(i.b,{className:"post-user",to:a&&a.uid===e.userId?{pathname:"/account"}:{pathname:"/user-profile",state:e.userId},children:[Object(c.jsx)("div",{className:"post-user-img user-img-bg",children:Object(c.jsx)("img",{src:e.userImage,alt:"profile pic"})}),Object(c.jsxs)("div",{className:"post-user-details",children:[Object(c.jsx)("span",{className:"post-user-username",children:e.user}),Object(c.jsxs)("div",{className:"post-user-fulldate",children:[Object(c.jsx)("span",{className:"post-user-date",children:e.date.date}),Object(c.jsxs)("span",{className:"post-user-time",children:[" ",Object(c.jsx)("span",{className:"in",children:"in"}),e.date.time]})]})]})]}),Object(c.jsx)("p",{className:"post-desc",children:e.comment}),Object(c.jsx)("div",{className:"post-image",children:Object(c.jsx)("img",{src:e.postImage,alt:""})}),z&&Object(c.jsx)("p",{className:"error",children:z}),Object(c.jsxs)("div",{className:"likes-and-comments",children:[Object(c.jsxs)("div",{className:"likes",children:[Object(c.jsxs)("button",{disabled:R,onClick:function(){return t=e.postId,void(a?(j(l+1),D(!0),f.a.database().ref("Posts/".concat(t)).update({likes:l+1}),f.a.database().ref("Posts/".concat(t,"/likedBy/").concat(a.uid)).set(a.uid)):(H("You need an account to Like or Write a comment!"),setTimeout((function(){H("")}),4e3)));var t},className:"likes-btn ".concat(R&&"liked"),children:[Object(c.jsx)("span",{className:"like-icon",children:Object(c.jsx)(S.a,{})}),"Like"]}),Object(c.jsx)("span",{className:"num-likes",children:l})]}),Object(c.jsx)("div",{className:"comments-info",children:Object(c.jsxs)("span",{children:[O," comments"]})})]}),Object(c.jsxs)("div",{className:"write-comment-container",style:ee?{border:"1px solid var(--red)"}:{color:""},children:[Object(c.jsx)("textarea",{value:N,ref:ce,onChange:function(e){return k(e.target.value.trimStart())},onKeyPress:function(e){return re(e)},className:"write-comment",placeholder:"Write a comment"}),Object(c.jsx)("div",{className:"emoji-picker",onClick:function(){return te(!ee)},children:Object(c.jsx)(B.a,{})})]}),ee&&Object(c.jsx)(C.a,{onEmojiClick:function(e,t){k(N+t.emoji),ce.current.select()},disableSearchBar:"true",disableSkinTonePicker:"true"}),Object(c.jsxs)("div",{ref:ae,className:"comments",children:[P.map((function(e){return Object(c.jsx)(U,{comment:e})})),X?Object(c.jsx)("div",{class:"loading-posts",children:Object(c.jsx)("div",{class:"snippet","data-title":".dot-falling",children:Object(c.jsx)("div",{class:"stage",children:Object(c.jsx)("div",{class:"dot-falling"})})})}):Object(c.jsx)("button",{className:"more-comments-btn",disabled:F,style:F?{color:"var(--grey)"}:{color:"var(--red)"},onClick:function(){!function(){Q(!0);var t=P,a=[];k([]);var c=0,s=0;f.a.database().ref("Posts/".concat(e.postId,"/comments")).orderByKey().endAt(Y).limitToLast(4).once("value",(function(n){n.forEach((function(n){f.a.database().ref("/Posts/".concat(e.postId,"/comments/").concat(n.key)).once("value").then((function(e){n.key!==Y&&(++c<2&&K(n.key),a=[e.exportVal()].concat(Object(b.a)(a)))})).then((function(){s++,P.length+s>O&&3!==s&&(t=[].concat(Object(b.a)(t),Object(b.a)(a)),I(t)),3===s&&(t=[].concat(Object(b.a)(t),Object(b.a)(a)),I(t))}))})),Q(!1)}))}()},children:F?"":"Load more comments"})]})]})};var R=function(){var e=g().posts;return Object(c.jsx)("div",{className:"allposts-container",children:e.map((function(e){return Object(c.jsx)(L,Object(I.a)({},e),e.postId)}))})};var D=function(){var e=g(),t=e.currentUser,a=e.loading,n=e.fetchUserPosts;if(Object(s.useEffect)((function(){n(),window.scroll({top:0,left:0})}),[]),t)return Object(c.jsxs)("div",{className:"profile-page",children:[a&&Object(c.jsx)(w,{}),Object(c.jsx)(y,{}),Object(c.jsx)(P,{fetchData:"myPosts",title:"Your Posts",allPostsLink:"See all posts"}),Object(c.jsx)(R,{})]})};var T=function(){var e=Object(s.useRef)(),t=g().resetPassword,a=Object(s.useState)(""),n=Object(p.a)(a,2),r=n[0],o=n[1],u=Object(s.useState)(!1),l=Object(p.a)(u,2),j=l[0],b=l[1],f=Object(s.useState)(""),O=Object(p.a)(f,2),h=O[0],x=O[1],v=function(){var a=Object(m.a)(d.a.mark((function a(c){return d.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return c.preventDefault(),a.prev=1,x(""),o(""),b(!0),a.next=7,t(e.current.value);case 7:x("Check your email for further instructions"),a.next=13;break;case 10:a.prev=10,a.t0=a.catch(1),o("Failed to reset password");case 13:b(!1);case 14:case"end":return a.stop()}}),a,null,[[1,10]])})));return function(e){return a.apply(this,arguments)}}();return Object(c.jsx)("div",{className:"account",children:Object(c.jsxs)("div",{className:"account-container",children:[Object(c.jsx)("h3",{children:"Password Rest"}),r&&Object(c.jsx)("p",{className:"form-error",children:r}),h&&Object(c.jsx)("p",{className:"account-message",children:h}),Object(c.jsxs)("form",{className:"account-form",onSubmit:v,children:[Object(c.jsxs)("div",{className:"input-container",children:[Object(c.jsx)("label",{children:"Email"}),Object(c.jsx)("input",{type:"text",placeholder:"email",ref:e,required:!0})]}),Object(c.jsx)("button",{disabled:j,className:"form-btn",type:"submit",children:"Reset Password"}),Object(c.jsx)(i.b,{className:"acc-link",to:"/login",children:"Login"})]}),Object(c.jsxs)("div",{className:"acc-link",children:["Need an account?",Object(c.jsx)(i.b,{to:"/signup",children:"Sign up"})]})]})})};var A=function(){var e=Object(s.useRef)(),t=Object(s.useRef)(),a=g(),n=a.login,r=(a.userData,Object(s.useState)("")),o=Object(p.a)(r,2),l=o[0],j=o[1],b=Object(s.useState)(!1),f=Object(p.a)(b,2),O=f[0],h=f[1],x=Object(u.g)(),v=function(){var a=Object(m.a)(d.a.mark((function a(c){return d.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return c.preventDefault(),a.prev=1,j(""),h(!0),a.next=6,n(e.current.value,t.current.value);case 6:x.push("/account"),a.next=12;break;case 9:a.prev=9,a.t0=a.catch(1),j("Wrong username or password");case 12:h(!1);case 13:case"end":return a.stop()}}),a,null,[[1,9]])})));return function(e){return a.apply(this,arguments)}}();return Object(c.jsx)("div",{className:"account",children:Object(c.jsxs)("div",{className:"account-auth-container",children:[Object(c.jsx)("h3",{children:"Log In"}),l&&Object(c.jsx)("p",{className:"form-error",children:l}),Object(c.jsxs)("form",{className:"account-form",onSubmit:v,children:[Object(c.jsxs)("div",{className:"input-container",children:[Object(c.jsx)("label",{children:"Email"}),Object(c.jsx)("input",{type:"text",placeholder:"email",ref:e})]}),Object(c.jsxs)("div",{className:"input-container",children:[Object(c.jsx)("label",{children:"Password"}),Object(c.jsx)("input",{type:"password",placeholder:"password",ref:t})]}),Object(c.jsx)("button",{disabled:O,className:"form-btn",type:"submit",children:"Log In"}),Object(c.jsx)(i.b,{className:"link forgot-password",to:"forgotPassword",children:"Forgot Password"})]}),Object(c.jsx)("div",{className:"acc-link",children:Object(c.jsxs)("p",{children:["Need an account? ",Object(c.jsx)(i.b,{className:"link",to:"/signup",children:" Sign up"})]})})]})})},F=a(102);function q(e){var t=e.component,a=Object(F.a)(e,["component"]),s=g().currentUser;return Object(c.jsx)(u.b,Object(I.a)(Object(I.a)({},a),{},{render:function(e){return s?Object(c.jsx)(t,Object(I.a)({},e)):Object(c.jsx)(u.a,{to:"/login"})}}))}a(94);var V=function(){var e=Object(s.useRef)(),t=Object(s.useRef)(),a=Object(s.useRef)(),n=Object(s.useRef)(),r=g(),o=r.signup,l=(r.writeUserData,r.currentUser,Object(s.useState)("")),j=Object(p.a)(l,2),b=j[0],f=j[1],O=Object(s.useState)(""),h=Object(p.a)(O,2),x=h[0],v=h[1],N=Object(s.useState)(!1),k=Object(p.a)(N,2),y=k[0],w=k[1],P=Object(u.g)(),I=function(){var c=Object(m.a)(d.a.mark((function c(s){return d.a.wrap((function(c){for(;;)switch(c.prev=c.next){case 0:if(s.preventDefault(),!(a.current.value.length<6)){c.next=3;break}return c.abrupt("return",f("Your password is too short"));case 3:if(a.current.value===n.current.value){c.next=5;break}return c.abrupt("return",f("Passwords do not match"));case 5:return c.prev=5,v(""),f(""),w(!0),c.next=11,o(e.current.value,t.current.value,a.current.value);case 11:setTimeout((function(){P.push("/")}),1e3),v("Your account has been created successfully!"),c.next=18;break;case 15:c.prev=15,c.t0=c.catch(5),f("Failed to create an account");case 18:w(!1);case 19:case"end":return c.stop()}}),c,null,[[5,15]])})));return function(e){return c.apply(this,arguments)}}();return Object(c.jsx)("div",{className:"account",children:Object(c.jsxs)("div",{className:"account-auth-container",children:[Object(c.jsx)("h3",{children:"Sign Up"}),b&&Object(c.jsx)("p",{className:"form-error",children:b}),x&&Object(c.jsx)("p",{className:"account-message",children:x}),Object(c.jsxs)("form",{className:"account-form",onSubmit:I,children:[Object(c.jsxs)("div",{className:"input-container",children:[Object(c.jsx)("label",{children:"Username"}),Object(c.jsx)("input",{type:"text",placeholder:"username",ref:e,required:!0})]}),Object(c.jsxs)("div",{className:"input-container",children:[Object(c.jsx)("label",{children:"Email"}),Object(c.jsx)("input",{type:"text",placeholder:"email",ref:t,required:!0})]}),Object(c.jsxs)("div",{className:"input-container",children:[Object(c.jsx)("label",{children:"Password"}),Object(c.jsx)("input",{type:"password",placeholder:"password",ref:a,required:!0})]}),Object(c.jsxs)("div",{className:"input-container",children:[Object(c.jsx)("label",{children:"Confirm Password"}),Object(c.jsx)("input",{type:"password",placeholder:"confirm password",ref:n,required:!0})]}),Object(c.jsx)("button",{disabled:y,className:"form-btn",type:"submit",children:"Register"})]}),Object(c.jsx)("div",{className:"acc-link",children:Object(c.jsxs)("p",{children:["Already have an account? ",Object(c.jsx)(i.b,{className:"link",to:"/login",children:" Log In"})]})})]})})};var W=function(){var e=Object(s.useRef)(),t=Object(s.useRef)(),a=Object(s.useRef)(),n=Object(s.useRef)(),r=g(),o=r.currentUser,l=r.updateEmail,j=r.updatePassword,b=r.updateUsername,f=r.userData,O=r.loading,h=Object(s.useState)(""),x=Object(p.a)(h,2),v=x[0],N=x[1],k=Object(u.g)(),y=function(){var c=Object(m.a)(d.a.mark((function c(s){var r;return d.a.wrap((function(c){for(;;)switch(c.prev=c.next){case 0:if(s.preventDefault(),a.current.value===n.current.value){c.next=3;break}return c.abrupt("return",N("Passwords do not match"));case 3:if(r=[],t.current.value!==o.email&&r.push(l(t.current.value)),a.current.value&&r.push(j(a.current.value)),!e.current.value){c.next=12;break}return c.t0=r,c.next=10,b(e.current.value);case 10:c.t1=c.sent,c.t0.push.call(c.t0,c.t1);case 12:Promise.all(r).then((function(){k.push("/account")})).catch((function(){N("Failed to update account")}));case 13:case"end":return c.stop()}}),c)})));return function(e){return c.apply(this,arguments)}}();return Object(c.jsx)("div",{className:"account",children:Object(c.jsxs)("div",{className:"account-auth-container",children:[Object(c.jsx)("h3",{children:"Update Profile"}),v&&Object(c.jsx)("p",{className:"form-error",children:v}),Object(c.jsxs)("form",{className:"account-form",onSubmit:y,children:[Object(c.jsxs)("div",{className:"input-container",children:[Object(c.jsx)("label",{children:"Username"}),Object(c.jsx)("input",{type:"text",placeholder:"email",ref:e,defaultValue:f.username})]}),Object(c.jsxs)("div",{className:"input-container",children:[Object(c.jsx)("label",{children:"Email"}),Object(c.jsx)("input",{type:"text",placeholder:"email",ref:t,defaultValue:o.email})]}),Object(c.jsxs)("div",{className:"input-container",children:[Object(c.jsx)("label",{children:"Password"}),Object(c.jsx)("input",{type:"password",ref:a,placeholder:"Leave blank to keep the same"})]}),Object(c.jsxs)("div",{className:"input-container",children:[Object(c.jsx)("label",{children:"Confirm Password"}),Object(c.jsx)("input",{type:"password",ref:n,placeholder:"Leave blank to keep the same"})]}),Object(c.jsx)("button",{disabled:O,className:"form-btn",type:"submit",children:"Update"})]}),Object(c.jsx)("div",{className:"acc-link",children:Object(c.jsx)(i.b,{className:"link",to:"/account",children:"Cancel"})})]})})},Y=(a(247),a(100));var K=function(){var e=g(),t=e.logout,a=e.getUserData,n=e.userData,r=e.currentUser,o=Object(s.useState)(),l=Object(p.a)(o,2),j=l[0],b=l[1],f=Object(s.useState)(""),O=Object(p.a)(f,2),h=O[0],x=O[1],v=Object(u.g)();Object(s.useEffect)((function(){window.addEventListener("scroll",N),r&&a(r.uid)}),[]);var N=function(){var e=window.scrollY;b(e>0)};function k(){return(k=Object(m.a)(d.a.mark((function e(){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,t();case 3:v.push("/login"),e.next=9;break;case 6:e.prev=6,e.t0=e.catch(0),x("Failed to log out");case 9:case"end":return e.stop()}}),e,null,[[0,6]])})))).apply(this,arguments)}return Object(c.jsxs)("div",{className:"social-nav ".concat(j&&"nav-fixed"),children:[Object(c.jsx)(i.b,{to:"/",className:"social-nav-title",children:"Social App"}),h&&alert(h),n.email?Object(c.jsxs)("div",{className:"social-nav-user",children:[Object(c.jsxs)(i.b,{to:"/account",className:"social-nav-user-details",children:[Object(c.jsxs)("p",{className:"go-to",children:["Go To ",Object(c.jsx)(Y.a,{})]}),Object(c.jsx)("div",{className:"social-nav-user-img user-img-bg",children:Object(c.jsx)("img",{src:n.userImage,alt:"",onClick:function(){return Object(c.jsx)(u.a,{to:"/"})}})}),Object(c.jsx)("h2",{className:"social-nav-username",children:n.username})]}),Object(c.jsx)("button",{className:"link logout",onClick:function(){return k.apply(this,arguments)},children:"Log Out"})]}):Object(c.jsxs)("div",{className:"social-nav-btn-container",children:[Object(c.jsx)(i.b,{to:"/login",className:"link login",children:"Log In"}),Object(c.jsx)(i.b,{to:"/signup",className:"link signup",children:"Sign Up"})]})]})};a(248);var G=function(){var e=g(),t=e.loading,a=e.loadingPosts,n=e.fetchFirstAllUserPosts,r=e.disabledPosts,o=e.fetchAllUserPosts;return Object(s.useEffect)((function(){n(),window.scroll({top:0,left:0})}),[]),Object(c.jsxs)("div",{className:"allposts",children:[t&&Object(c.jsx)(w,{}),Object(c.jsx)(P,{title:"All Posts",allPostsLink:"",type:"all"}),Object(c.jsx)(R,{}),a?Object(c.jsx)("div",{class:"loading-posts",children:Object(c.jsx)("div",{class:"snippet","data-title":".dot-falling",children:Object(c.jsx)("div",{class:"stage",children:Object(c.jsx)("div",{class:"dot-falling"})})})}):Object(c.jsx)("button",{disabled:r,className:"fetch-more-posts",style:r?{color:"var(--grey)"}:{color:"var(--red)"},onClick:o,children:r?"No more Posts":"Load more posts"})]})};a(249);var M=function(){var e=Object(s.useState)(),t=Object(p.a)(e,2),a=t[0],n=t[1],r=Object(s.useState)(""),o=Object(p.a)(r,2),i=o[0],l=o[1],j=Object(u.h)(),d=Object(u.g)(),b=j.state;return Object(s.useEffect)((function(){b||d.push("/"),n(!0),f.a.database().ref("users/".concat(b)).once("value").then((function(e){l(e.exportVal())})).then((function(){n(!1)}))}),[]),Object(c.jsxs)("div",{className:"account",children:[a&&Object(c.jsx)(w,{}),Object(c.jsxs)("div",{className:"account-container",children:[Object(c.jsx)("div",{className:"user-bg-img",children:i.userBgImg&&Object(c.jsx)("img",{src:i.userBgImg,alt:"background-img"})}),Object(c.jsx)("div",{className:"user-image",children:Object(c.jsx)("img",{src:i.userImage,alt:"user img"})}),Object(c.jsx)("p",{className:"account-username",children:i.username})]})]})};var z=function(){return Object(c.jsx)(i.a,{children:Object(c.jsx)(u.d,{children:Object(c.jsx)(l.a,{children:Object(c.jsxs)(N,{children:[Object(c.jsx)(K,{}),Object(c.jsx)(u.b,{exact:!0,path:"/",component:G}),Object(c.jsx)(q,{exact:!0,path:"/account",component:D}),Object(c.jsx)(q,{exact:!0,path:"/updateProfile",component:W}),Object(c.jsx)(u.b,{path:"/user-profile",component:M}),Object(c.jsx)(u.b,{exact:!0,path:"/signup",component:V}),Object(c.jsx)(u.b,{path:"/login",component:A}),Object(c.jsx)(u.b,{path:"/forgotPassword",component:T})]})})})})},H=function(e){e&&e instanceof Function&&a.e(3).then(a.bind(null,251)).then((function(t){var a=t.getCLS,c=t.getFID,s=t.getFCP,n=t.getLCP,r=t.getTTFB;a(e),c(e),s(e),n(e),r(e)}))};o.a.render(Object(c.jsx)(n.a.StrictMode,{children:Object(c.jsx)(z,{})}),document.getElementById("root")),H()},94:function(e,t,a){}},[[250,1,2]]]);
//# sourceMappingURL=main.45e4ab08.chunk.js.map